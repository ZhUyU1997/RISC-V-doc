<table border="0" height="1453" width="1123">
<tr><td>
<div style="position:absolute; top:0; left:0;"><img height="1453" width="1123"src="bgimg/bg00080.jpg"/></div>
<div style="position:absolute;top:74.119;left:132.145;"><nobr>
<span style="font-size:20.022;">68</span>
</nobr></div>
<div style="position:absolute;top:74.119;left:331.141;"><nobr>
<span style="font-size:20.022;font-style:italic;">Volume II: RISC-V Privileged Architectures V20190608-Priv-MSU-Ratified</span>
</nobr></div>
<div style="position:absolute;top:128.281;left:300.122;"><nobr>
<span style="font-size:14.628;">31</span>
</nobr></div>
<div style="position:absolute;top:128.281;left:445.436;"><nobr>
<span style="font-size:14.628;">22 21</span>
</nobr></div>
<div style="position:absolute;top:128.281;left:611.916;"><nobr>
<span style="font-size:14.628;">12 11</span>
</nobr></div>
<div style="position:absolute;top:128.281;left:809.964;"><nobr>
<span style="font-size:14.628;">0</span>
</nobr></div>
<div style="position:absolute;top:147.856;left:350.372;"><nobr>
<span style="font-size:16.456;">VPN[1]</span>
</nobr></div>
<div style="position:absolute;top:168.702;left:369.280;"><nobr>
<span style="font-size:16.456;">10</span>
</nobr></div>
<div style="position:absolute;top:147.856;left:516.508;"><nobr>
<span style="font-size:16.456;">VPN[0]</span>
</nobr></div>
<div style="position:absolute;top:168.702;left:535.754;"><nobr>
<span style="font-size:16.456;">10</span>
</nobr></div>
<div style="position:absolute;top:147.856;left:688.471;"><nobr>
<span style="font-size:16.456;">page offset</span>
</nobr></div>
<div style="position:absolute;top:168.702;left:714.125;"><nobr>
<span style="font-size:16.456;">12</span>
</nobr></div>
<div style="position:absolute;top:215.006;left:413.064;"><nobr>
<span style="font-size:20.022;">Figure 4.13: Sv32 virtual address.</span>
</nobr></div>
<div style="position:absolute;top:260.915;left:288.229;"><nobr>
<span style="font-size:14.628;">33</span>
</nobr></div>
<div style="position:absolute;top:260.915;left:457.328;"><nobr>
<span style="font-size:14.628;">22 21</span>
</nobr></div>
<div style="position:absolute;top:260.915;left:623.808;"><nobr>
<span style="font-size:14.628;">12 11</span>
</nobr></div>
<div style="position:absolute;top:260.915;left:821.856;"><nobr>
<span style="font-size:14.628;">0</span>
</nobr></div>
<div style="position:absolute;top:280.490;left:350.959;"><nobr>
<span style="font-size:16.456;">PPN[1]</span>
</nobr></div>
<div style="position:absolute;top:301.334;left:369.280;"><nobr>
<span style="font-size:16.456;">12</span>
</nobr></div>
<div style="position:absolute;top:280.490;left:528.988;"><nobr>
<span style="font-size:16.456;">PPN[0]</span>
</nobr></div>
<div style="position:absolute;top:301.334;left:547.652;"><nobr>
<span style="font-size:16.456;">10</span>
</nobr></div>
<div style="position:absolute;top:280.490;left:700.364;"><nobr>
<span style="font-size:16.456;">page offset</span>
</nobr></div>
<div style="position:absolute;top:301.334;left:726.007;"><nobr>
<span style="font-size:16.456;">12</span>
</nobr></div>
<div style="position:absolute;top:347.639;left:407.198;"><nobr>
<span style="font-size:20.022;">Figure 4.14: Sv32 physical address.</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:203.627;"><nobr>
<span style="font-size:14.628;">31</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:372.725;"><nobr>
<span style="font-size:14.628;">20 19</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:539.206;"><nobr>
<span style="font-size:14.628;">10 9</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:618.328;"><nobr>
<span style="font-size:14.628;">8</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:650.978;"><nobr>
<span style="font-size:14.628;">7</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:686.451;"><nobr>
<span style="font-size:14.628;">6</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:722.084;"><nobr>
<span style="font-size:14.628;">5</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:757.732;"><nobr>
<span style="font-size:14.628;">4</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:793.088;"><nobr>
<span style="font-size:14.628;">3</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:830.784;"><nobr>
<span style="font-size:14.628;">2</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:868.378;"><nobr>
<span style="font-size:14.628;">1</span>
</nobr></div>
<div style="position:absolute;top:393.546;left:903.602;"><nobr>
<span style="font-size:14.628;">0</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:266.357;"><nobr>
<span style="font-size:16.456;">PPN[1]</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:284.677;"><nobr>
<span style="font-size:16.456;">12</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:444.386;"><nobr>
<span style="font-size:16.456;">PPN[0]</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:463.049;"><nobr>
<span style="font-size:16.456;">10</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:575.966;"><nobr>
<span style="font-size:16.456;">RSW</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:586.177;"><nobr>
<span style="font-size:16.456;">2</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:648.081;"><nobr>
<span style="font-size:16.456;">D</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:650.604;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:683.672;"><nobr>
<span style="font-size:16.456;">A</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:686.068;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:719.028;"><nobr>
<span style="font-size:16.456;">G</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:721.696;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:754.973;"><nobr>
<span style="font-size:16.456;">U</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:757.341;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:790.329;"><nobr>
<span style="font-size:16.456;">X</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:792.673;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:825.684;"><nobr>
<span style="font-size:16.456;">W</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:830.358;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:865.738;"><nobr>
<span style="font-size:16.456;">R</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:867.945;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:413.123;left:900.861;"><nobr>
<span style="font-size:16.456;">V</span>
</nobr></div>
<div style="position:absolute;top:433.967;left:903.161;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:480.271;left:407.642;"><nobr>
<span style="font-size:20.022;">Figure 4.15: Sv32 page table entry.</span>
</nobr></div>
<div style="position:absolute;top:543.099;left:132.145;"><nobr>
<span style="font-size:20.022;">Sv32 page tables consist of 2</span>
<span style="font-size:14.628;">10</span>
<span style="font-size:20.022;">page-table entries (PTEs), each of four bytes. A page table is exactly</span>
</nobr></div>
<div style="position:absolute;top:567.966;left:132.145;"><nobr>
<span style="font-size:20.022;">the size of a page and must always be aligned to a page boundary. The physical page number of</span>
</nobr></div>
<div style="position:absolute;top:592.833;left:132.145;"><nobr>
<span style="font-size:20.022;">the root page table is stored in the satp register.</span>
</nobr></div>
<div style="position:absolute;top:635.986;left:132.145;"><nobr>
<span style="font-size:20.022;">The PTE format for Sv32 is shown in Figures</span>
<span style="font-size:20.022;color: #000080;"><a href="#" onClick="javascript:parent.GotoNewPage(79); return false">4.15</a></span>
<span style="font-size:20.022;">. The V bit indicates whether the PTE is valid; if</span>
</nobr></div>
<div style="position:absolute;top:660.853;left:132.145;"><nobr>
<span style="font-size:20.022;">it is 0, all other bits in the PTE are donâ€™t-cares and may be used freely by software. The permission</span>
</nobr></div>
<div style="position:absolute;top:685.722;left:132.145;"><nobr>
<span style="font-size:20.022;">bits, R, W, and X, indicate whether the page is readable, writable, and executable, respectively.</span>
</nobr></div>
<div style="position:absolute;top:710.589;left:132.145;"><nobr>
<span style="font-size:20.022;">When all three are zero, the PTE is a pointer to the next level of the page table; otherwise, it is</span>
</nobr></div>
<div style="position:absolute;top:735.456;left:132.145;"><nobr>
<span style="font-size:20.022;">a leaf PTE. Writable pages must also be marked readable; the contrary combinations are reserved</span>
</nobr></div>
<div style="position:absolute;top:760.323;left:132.145;"><nobr>
<span style="font-size:20.022;">for future use. Table</span>
<span style="font-size:20.022;color: #000080;"><a href="#" onClick="javascript:parent.GotoNewPage(79); return false">4.4</a></span>
<span style="font-size:20.022;">summarizes the encoding of the permission bits.</span>
</nobr></div>
<div style="position:absolute;top:806.548;left:348.247;"><nobr>
<span style="font-size:20.022;">X</span>
</nobr></div>
<div style="position:absolute;top:832.146;left:350.748;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:857.015;left:350.748;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:881.882;left:350.748;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:906.749;left:350.748;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:931.617;left:350.748;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:956.484;left:350.748;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:981.353;left:350.748;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:1006.220;left:350.748;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:806.548;left:385.936;"><nobr>
<span style="font-size:20.022;">W</span>
</nobr></div>
<div style="position:absolute;top:832.146;left:391.220;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:857.015;left:391.220;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:881.882;left:391.220;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:906.749;left:391.220;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:931.617;left:391.220;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:956.484;left:391.220;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:981.353;left:391.220;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:1006.220;left:391.220;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:806.548;left:429.187;"><nobr>
<span style="font-size:20.022;">R</span>
</nobr></div>
<div style="position:absolute;top:832.146;left:431.551;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:857.015;left:431.551;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:881.882;left:431.551;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:906.749;left:431.551;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:931.617;left:431.551;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:956.484;left:431.551;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:981.353;left:431.551;"><nobr>
<span style="font-size:20.022;">0</span>
</nobr></div>
<div style="position:absolute;top:1006.220;left:431.551;"><nobr>
<span style="font-size:20.022;">1</span>
</nobr></div>
<div style="position:absolute;top:806.548;left:470.988;"><nobr>
<span style="font-size:20.022;">Meaning</span>
</nobr></div>
<div style="position:absolute;top:832.146;left:470.988;"><nobr>
<span style="font-size:20.022;">Pointer to next level of page table.</span>
</nobr></div>
<div style="position:absolute;top:857.015;left:470.988;"><nobr>
<span style="font-size:20.022;">Read-only page.</span>
</nobr></div>
<div style="position:absolute;top:881.882;left:470.988;"><nobr>
<span style="font-size:20.022;font-style:italic;">Reserved for future use.</span>
</nobr></div>
<div style="position:absolute;top:906.749;left:470.988;"><nobr>
<span style="font-size:20.022;">Read-write page.</span>
</nobr></div>
<div style="position:absolute;top:931.617;left:470.988;"><nobr>
<span style="font-size:20.022;">Execute-only page.</span>
</nobr></div>
<div style="position:absolute;top:956.484;left:470.988;"><nobr>
<span style="font-size:20.022;">Read-execute page.</span>
</nobr></div>
<div style="position:absolute;top:981.353;left:470.988;"><nobr>
<span style="font-size:20.022;font-style:italic;">Reserved for future use.</span>
</nobr></div>
<div style="position:absolute;top:1006.220;left:470.988;"><nobr>
<span style="font-size:20.022;">Read-write-execute page.</span>
</nobr></div>
<div style="position:absolute;top:1071.483;left:370.519;"><nobr>
<span style="font-size:20.022;">Table 4.4: Encoding of PTE R/W/X fields.</span>
</nobr></div>
<div style="position:absolute;top:1121.656;left:132.145;"><nobr>
<span style="font-size:20.022;">Attempting to fetch an instruction from a page that does not have execute permissions raises a</span>
</nobr></div>
<div style="position:absolute;top:1146.523;left:132.145;"><nobr>
<span style="font-size:20.022;">fetch page-fault exception. Attempting to execute a load or load-reserved instruction whose effective</span>
</nobr></div>
<div style="position:absolute;top:1171.390;left:132.145;"><nobr>
<span style="font-size:20.022;">address lies within a page without read permissions raises a load page-fault exception. Attempting</span>
</nobr></div>
<div style="position:absolute;top:1196.257;left:132.145;"><nobr>
<span style="font-size:20.022;">to execute a store, store-conditional (regardless of success), or AMO instruction whose effective</span>
</nobr></div>
<div style="position:absolute;top:1221.125;left:132.145;"><nobr>
<span style="font-size:20.022;">address lies within a page without write permissions raises a store page-fault exception.</span>
</nobr></div>
<div style="position:absolute;top:1279.030;left:182.201;"><nobr>
<span style="font-size:18.285;font-style:italic;">AMOs never raise load page-fault exceptions. Since any unreadable page is also unwritable,</span>
</nobr></div>
<div style="position:absolute;top:1300.971;left:182.201;"><nobr>
<span style="font-size:18.285;font-style:italic;">attempting to perform an AMO on an unreadable page always raises a store page-fault exception.</span>
</nobr></div>
</td></tr>
</table>
