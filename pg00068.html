<table border="0" height="1453" width="1123">
<tr><td>
<div style="position:absolute; top:0; left:0;"><img height="1453" width="1123"src="bgimg/bg00068.jpg"/></div>
<div style="position:absolute;top:74.119;left:132.145;"><nobr>
<span style="font-size:20.022;">56</span>
</nobr></div>
<div style="position:absolute;top:74.119;left:331.141;"><nobr>
<span style="font-size:20.022;font-style:italic;">Volume II: RISC-V Privileged Architectures V20190608-Priv-MSU-Ratified</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:143.578;"><nobr>
<span style="font-size:14.628;">31</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:183.497;"><nobr>
<span style="font-size:14.628;">30 20</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:261.449;"><nobr>
<span style="font-size:14.628;">19</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:315.909;"><nobr>
<span style="font-size:14.628;">18</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:377.712;"><nobr>
<span style="font-size:14.628;">17</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:435.229;"><nobr>
<span style="font-size:14.628;">16 15</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:503.249;"><nobr>
<span style="font-size:14.628;">14 13</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:568.987;"><nobr>
<span style="font-size:14.628;">12</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:603.143;"><nobr>
<span style="font-size:14.628;">9</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:646.720;"><nobr>
<span style="font-size:14.628;">8</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:687.444;"><nobr>
<span style="font-size:14.628;">7</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:721.600;"><nobr>
<span style="font-size:14.628;">6</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:768.234;"><nobr>
<span style="font-size:14.628;">5</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:823.747;"><nobr>
<span style="font-size:14.628;">4</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:869.166;"><nobr>
<span style="font-size:14.628;">3</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:903.323;"><nobr>
<span style="font-size:14.628;">2</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:944.193;"><nobr>
<span style="font-size:14.628;">1</span>
</nobr></div>
<div style="position:absolute;top:150.223;left:988.208;"><nobr>
<span style="font-size:14.628;">0</span>
</nobr></div>
<div style="position:absolute;top:169.798;left:140.191;"><nobr>
<span style="font-size:16.456;text-decoration:underline;">SD</span>
<span></span>
<span style="font-size:16.456;font-weight:bold;text-decoration:underline;">WPRI</span>
<span></span>
<span style="font-size:16.456;text-decoration:underline;">MXR SUM</span>
<span></span>
<span style="font-size:16.456;font-weight:bold;text-decoration:underline;">WPRI</span>
<span></span>
<span style="font-size:16.456;text-decoration:underline;">XS[1:0] FS[1:0]</span>
<span></span>
<span style="font-size:16.456;font-weight:bold;text-decoration:underline;">WPRI</span>
<span></span>
<span style="font-size:16.456;text-decoration:underline;">SPP</span>
<span></span>
<span style="font-size:16.456;font-weight:bold;text-decoration:underline;">WPRI</span>
<span></span>
<span style="font-size:16.456;text-decoration:underline;">SPIE UPIE</span>
<span></span>
<span style="font-size:16.456;font-weight:bold;text-decoration:underline;">WPRI</span>
<span></span>
<span style="font-size:16.456;text-decoration:underline;">SIE UIE</span>
<span></span>
</nobr></div>
<div style="position:absolute;top:190.644;left:147.120;"><nobr>
<span style="font-size:16.456;">1 11 1 1 1 2 2 4 1 2 1 1 2 1 1</span>
</nobr></div>
<div style="position:absolute;top:238.060;left:278.335;"><nobr>
<span style="font-size:20.022;">Figure 4.1: Supervisor-mode status register ( sstatus ) for RV32.</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:243.257;"><nobr>
<span style="font-size:14.628;">SXLEN-1</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:328.611;"><nobr>
<span style="font-size:14.628;">SXLEN-2</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:450.096;"><nobr>
<span style="font-size:14.628;">34</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:485.905;"><nobr>
<span style="font-size:14.628;">33 32</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:548.513;"><nobr>
<span style="font-size:14.628;">31</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:670.042;"><nobr>
<span style="font-size:14.628;">20</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:713.106;"><nobr>
<span style="font-size:14.628;">19</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:767.566;"><nobr>
<span style="font-size:14.628;">18</span>
</nobr></div>
<div style="position:absolute;top:304.844;left:829.369;"><nobr>
<span style="font-size:14.628;">17</span>
</nobr></div>
<div style="position:absolute;top:324.421;left:264.674;"><nobr>
<span style="font-size:16.456;">SD</span>
</nobr></div>
<div style="position:absolute;top:345.265;left:271.602;"><nobr>
<span style="font-size:16.456;">1</span>
</nobr></div>
<div style="position:absolute;top:324.421;left:366.356;"><nobr>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
</nobr></div>
<div style="position:absolute;top:345.265;left:354.675;"><nobr>
<span style="font-size:16.456;">SXLEN-35</span>
</nobr></div>
<div style="position:absolute;top:324.421;left:486.043;"><nobr>
<span style="font-size:16.456;">UXL</span>
</nobr></div>
<div style="position:absolute;top:345.265;left:500.051;"><nobr>
<span style="font-size:16.456;">2</span>
</nobr></div>
<div style="position:absolute;top:324.421;left:586.328;"><nobr>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
</nobr></div>
<div style="position:absolute;top:345.265;left:605.801;"><nobr>
<span style="font-size:16.456;">12</span>
</nobr></div>
<div style="position:absolute;top:324.421;left:700.348;"><nobr>
<span style="font-size:16.456;">MXR SUM</span>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
</nobr></div>
<div style="position:absolute;top:345.265;left:716.668;"><nobr>
<span style="font-size:16.456;">1 1 1</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:285.881;"><nobr>
<span style="font-size:14.628;">16 15</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:354.077;"><nobr>
<span style="font-size:14.628;">14 13</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:424.335;"><nobr>
<span style="font-size:14.628;">12 9</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:498.103;"><nobr>
<span style="font-size:14.628;">8</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:544.723;"><nobr>
<span style="font-size:14.628;">7</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:569.941;"><nobr>
<span style="font-size:14.628;">6</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:619.617;"><nobr>
<span style="font-size:14.628;">5</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:675.130;"><nobr>
<span style="font-size:14.628;">4</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:726.445;"><nobr>
<span style="font-size:14.628;">3</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:751.664;"><nobr>
<span style="font-size:14.628;">2</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:795.577;"><nobr>
<span style="font-size:14.628;">1</span>
</nobr></div>
<div style="position:absolute;top:388.589;left:839.592;"><nobr>
<span style="font-size:14.628;">0</span>
</nobr></div>
<div style="position:absolute;top:408.166;left:278.788;"><nobr>
<span style="font-size:16.456;">XS[1:0] FS[1:0]</span>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
<span style="font-size:16.456;">SPP</span>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
<span style="font-size:16.456;">SPIE UPIE</span>
<span style="font-size:16.456;font-weight:bold;">WPRI</span>
<span style="font-size:16.456;">SIE UIE</span>
</nobr></div>
<div style="position:absolute;top:429.010;left:301.469;"><nobr>
<span style="font-size:16.456;">2 2 4 1 2 1 1 2 1 1</span>
</nobr></div>
<div style="position:absolute;top:476.426;left:278.335;"><nobr>
<span style="font-size:20.022;">Figure 4.2: Supervisor-mode status register ( sstatus ) for RV64.</span>
</nobr></div>
<div style="position:absolute;top:540.015;left:132.145;"><nobr>
<span style="font-size:20.022;">privilege level is set to user mode if the SPP bit is 0, or supervisor mode if the SPP bit is 1; SPP</span>
</nobr></div>
<div style="position:absolute;top:564.884;left:132.145;"><nobr>
<span style="font-size:20.022;">is then set to 0.</span>
</nobr></div>
<div style="position:absolute;top:608.035;left:132.145;"><nobr>
<span style="font-size:20.022;">The SIE bit enables or disables all interrupts in supervisor mode. When SIE is clear, interrupts</span>
</nobr></div>
<div style="position:absolute;top:632.904;left:132.145;"><nobr>
<span style="font-size:20.022;">are not taken while in supervisor mode. When the hart is running in user-mode, the value in</span>
</nobr></div>
<div style="position:absolute;top:657.771;left:132.145;"><nobr>
<span style="font-size:20.022;">SIE is ignored, and supervisor-level interrupts are enabled. The supervisor can disable individual</span>
</nobr></div>
<div style="position:absolute;top:682.638;left:132.145;"><nobr>
<span style="font-size:20.022;">interrupt sources using the sie CSR.</span>
</nobr></div>
<div style="position:absolute;top:725.791;left:132.145;"><nobr>
<span style="font-size:20.022;">The SPIE bit indicates whether supervisor interrupts were enabled prior to trapping into supervisor</span>
</nobr></div>
<div style="position:absolute;top:750.658;left:132.145;"><nobr>
<span style="font-size:20.022;">mode. When a trap is taken into supervisor mode, SPIE is set to SIE, and SIE is set to 0. When</span>
</nobr></div>
<div style="position:absolute;top:775.526;left:132.145;"><nobr>
<span style="font-size:20.022;">an SRET instruction is executed, SIE is set to SPIE, then SPIE is set to 1.</span>
</nobr></div>
<div style="position:absolute;top:818.678;left:132.145;"><nobr>
<span style="font-size:20.022;">The UIE bit enables or disables user-mode interrupts. User-level interrupts are enabled only if UIE</span>
</nobr></div>
<div style="position:absolute;top:843.545;left:132.145;"><nobr>
<span style="font-size:20.022;">is set and the hart is running in user-mode. The UPIE bit indicates whether user-level interrupts</span>
</nobr></div>
<div style="position:absolute;top:868.413;left:132.145;"><nobr>
<span style="font-size:20.022;">were enabled prior to taking a user-level trap. When a URET instruction is executed, UIE is set</span>
</nobr></div>
<div style="position:absolute;top:893.282;left:132.145;"><nobr>
<span style="font-size:20.022;">to UPIE, and UPIE is set to 1. User-level interrupts are optional. If omitted, the UIE and UPIE</span>
</nobr></div>
<div style="position:absolute;top:918.149;left:132.145;"><nobr>
<span style="font-size:20.022;">bits are hardwired to zero.</span>
</nobr></div>
<div style="position:absolute;top:981.787;left:182.201;"><nobr>
<span style="font-size:18.285;font-style:italic;">The</span>
<span style="font-size:18.285;">sstatus</span>
<span style="font-size:18.285;font-style:italic;">register is a subset of the</span>
<span style="font-size:18.285;">mstatus</span>
<span style="font-size:18.285;font-style:italic;">register. In a straightforward implementation,</span>
</nobr></div>
<div style="position:absolute;top:1003.731;left:182.201;"><nobr>
<span style="font-size:18.285;font-style:italic;">reading or writing any field in</span>
<span style="font-size:18.285;">sstatus</span>
<span style="font-size:18.285;font-style:italic;">is equivalent to reading or writing the homonymous field</span>
</nobr></div>
<div style="position:absolute;top:1025.672;left:182.201;"><nobr>
<span style="font-size:18.285;font-style:italic;">in</span>
<span style="font-size:18.285;">mstatus</span>
<span style="font-size:18.285;font-style:italic;">.</span>
</nobr></div>
<div style="position:absolute;top:1098.832;left:132.145;"><nobr>
<span style="font-size:21.942;font-weight:bold;">4.1.2</span>
</nobr></div>
<div style="position:absolute;top:1098.832;left:207.516;"><nobr>
<span style="font-size:21.942;font-weight:bold;">Base ISA Control in</span>
<span style="font-size:21.942;">sstatus</span>
<span style="font-size:21.942;font-weight:bold;">Register</span>
</nobr></div>
<div style="position:absolute;top:1157.143;left:132.145;"><nobr>
<span style="font-size:20.022;">The UXL field controls the value of XLEN for U-mode, termed</span>
<span style="font-size:20.022;font-style:italic;">UXLEN</span>
<span style="font-size:20.022;">, which may differ from the</span>
</nobr></div>
<div style="position:absolute;top:1182.010;left:132.145;"><nobr>
<span style="font-size:20.022;">value of XLEN for S-mode, termed</span>
<span style="font-size:20.022;font-style:italic;">SXLEN</span>
<span style="font-size:20.022;">. The encoding of UXL is the same as that of the MXL</span>
</nobr></div>
<div style="position:absolute;top:1206.879;left:132.145;"><nobr>
<span style="font-size:20.022;">field of misa , shown in Table</span>
<span style="font-size:20.022;color: #000080;"><a href="#" onClick="javascript:parent.GotoNewPage(27); return false">3.1</a></span>
<span style="font-size:20.022;">.</span>
</nobr></div>
<div style="position:absolute;top:1250.030;left:132.145;"><nobr>
<span style="font-size:20.022;">For RV32 systems, the UXL field does not exist, and UXLEN=32. For RV64 systems, it is a</span>
</nobr></div>
<div style="position:absolute;top:1274.899;left:132.145;"><nobr>
<span style="font-size:20.022;font-weight:bold;">WARL</span>
<span style="font-size:20.022;">field that encodes the current value of UXLEN. In particular, the implementation may</span>
</nobr></div>
<div style="position:absolute;top:1299.766;left:132.145;"><nobr>
<span style="font-size:20.022;">hardwire UXL so that UXLEN=SXLEN.</span>
</nobr></div>
</td></tr>
</table>
